apply plugin: 'maven'

def NEXUS_USERNAME = "admin"
def NEXUS_PASSWORD = "admin"

def VERSION_NAME = '1.0.0'
def ARTIFACT_ID = 'eayphotos'
def GROUP_ID = 'com.z2wenfa'

// 是否是release包
def isRelease = true

// Maven仓库的URL
def MAVEN_REPO_RELEASE_URL = 'http://z2wenfa.com:9036/repository/maven-releases/'

def MAVEN_REPO_SNAPSHOT_URL = 'http://z2wenfa.com:9036/repository/maven-snapshots/'


afterEvaluate { project ->
    uploadArchives {
        repositories {
            mavenDeployer {
                pom.groupId = GROUP_ID
                pom.artifactId = ARTIFACT_ID
                pom.version = (VERSION_NAME + "-" + (isRelease ? 'release' : 'SNAPSHOT'))
                repository(url: isRelease ? MAVEN_REPO_RELEASE_URL : MAVEN_REPO_SNAPSHOT_URL) {
                    authentication(userName: NEXUS_USERNAME, password: NEXUS_PASSWORD)
                }
            }
        }
    }


}
